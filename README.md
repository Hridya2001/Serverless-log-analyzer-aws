

#  Log Analyzer using AWS Lambda, Athena & Glue

This project demonstrates a **serverless architecture** on AWS for monitoring and analyzing log events generated by Lambda functions. The solution is designed to **ingest, process, store, analyze, and alert** based on log data — entirely using AWS managed services.

---

## Overview

Serverless Log Analyzer is a real-time log processing pipeline built using AWS services like Lambda, CloudWatch, S3, Glue, Athena, and SNS. The system:

- Captures logs from AWS Lambda
- Ships them to S3 using a log-shipper Lambda function
- Structures and catalogs the logs using AWS Glue
- Queries logs using Athena to detect issues
- Sends alerts when errors exceed a threshold

---

## Project Structure

| Folder/File                      | Description                                                   |
|----------------------------------|---------------------------------------------------------------|
| `lambda/my-function.py`          | Lambda to generate log messages                               |
| `lambda/log-shipper.py`          | Lambda to decode & push logs to S3                            |
| `lambda/athena_alert_lambda.py`  | Lambda to run Athena query & trigger SNS alerts               |
| `athena/athena_queries.sql`      | SQL queries for log analysis in Athena                        |
| `diagram/image.png`              | Architecture diagram for the pipeline                         |
| `README.md`                      | Project documentation and setup guide                         |
| `.gitattributes`                 | GitHub language stats override config                         |
| `LICENSE`                        | MIT license for open-source use                               |

---

##  Architecture

![Architecture Diagram](Daigrams/image.png)

---

##  Components & Responsibilities

| Component                     | Description |
|------------------------------|-------------|
| `Lambda (my-function)`       | Generates log messages (INFO, WARNING, ERROR) |
| `CloudWatch Logs`            | Stores logs from Lambda |
| `Lambda (log-shipper)`       | Subscribed to CloudWatch; parses and pushes logs to S3 |
| `S3: /logs/YYYY/MM/DD/`      | Stores structured logs for each day |
| `S3: /athena-results/`       | Stores the result of Athena SQL queries |
| `Glue Crawler`               | Scans logs in S3 and creates schema |
| `Glue Data Catalog`          | Stores table definitions for Athena |
| `Athena`                     | Executes SQL queries on logs |
| `Lambda (athena_alert_lambda)` | Periodically checks error counts and triggers alerts |
| `SNS`                        | Sends alerts via Email, SMS, or App Notification |

---

##  Features

-  Fully Serverless Architecture
-  Structured S3 log storage with timestamps
-  SQL-based log analytics using Athena
-  Real-time alerts via Amazon SNS
-  Auto-generated schema from JSON logs via Glue
-  Email alerts for operational issues

---

##  Setup Instructions

### 1. Create Lambda Function: `my-function.py`

- Generates dummy logs
- Attach IAM Role:

```json
{
  "Effect": "Allow",
  "Action": [
    "logs:CreateLogGroup",
    "logs:CreateLogStream",
    "logs:PutLogEvents"
  ],
  "Resource": "*"
}

---

### 2. View Logs in CloudWatch

- Navigate to **CloudWatch** → **Logs**
- Select log group:  
  `/aws/lambda/my-function`

---

### 3.Create Primary S3 Bucket for Logs

- **Bucket Name**: `log-analyzer-hridya`
- **Purpose**: Stores logs in structured folders
- **Folder Structure**:
  ```
  /logs/YYYY/MM/DD/
  ```

---
